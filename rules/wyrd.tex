\documentclass[twopage,twocolumn,nodeprecatedcode,bg=print]{dndbook}

\usepackage[english]{babel}
\usepackage[utf8]{inputenc}
\usepackage[singlelinecheck=false]{caption}
\usepackage{listings}
\usepackage{shortvrb}
\usepackage{stfloats}
\usepackage{tikz}
\usepackage{xcolor}
\usepackage{xspace}
\usepackage{fontawesome}
\usepackage{pgffor}

\usepackage{imakeidx}
\makeindex

\usepackage{todo}

\captionsetup[table]{labelformat=empty,font={sf,sc,bf,},skip=0pt}

%% References to pages
\usepackage{hyperref}  
\usepackage{refcount}  
\newcommand{\pagereftext}[1]{%
    \ifnum\getpagerefnumber{#1}=\thepage
        on this page%
    \else
        on page \pageref{#1}%
    \fi
}

%% Fudge dice notation %%%%%%%%%%%%%%%%%
% Defining the three outcomes
\newcommand{\FudgeDieP}{\faPlusSquare\xspace}
\newcommand{\FudgeDieM}{\faMinusSquare\xspace}
\newcommand{\FudgeDieB}{\faSquare\xspace}

% Defining shorthand for single-die outcomes
\newcommand{\FudgeDie}[1]{%
    \ifx#1+\FudgeDieP
    \else\ifx#1-\FudgeDieM
    \else\FudgeDieB
    \fi\fi
}

%% Stress and wounds
\newcommand{\StressBox}{\faCircleO\xspace}
\newcommand{\MildWound}{\faHeartO\xspace}
\newcommand{\ModerateWound}{\faHeartbeat\xspace}
\newcommand{\SevereWound}{\faHeart\xspace}

\newcommand{\StressBoxes}{\StressBox\StressBox\StressBox\StressBox\StressBox}
\newcommand{\MildWounds}{\MildWound\MildWound\MildWound}
\newcommand{\ModerateWounds}{\ModerateWound\ModerateWound}
\newcommand{\SevereWounds}{\SevereWound}

\newcommand{\Damage}{
    \begin{tabular}{@{}l l@{}}
        \textbf{Stress:} & \StressBoxes \\ 
        \textbf{Wounds:} & \MildWounds\ \ModerateWounds\ \SevereWounds
    \end{tabular}
}

% Translating a sequence of die rolls
\newcommand{\FudgeRes}[1]{%
    \edef\tempstr{#1} % Store input string in \tempstr
    \expandafter\FudgeLoop\tempstr\relax % Expand it into the loop
}
\def\FudgeLoop#1{%
    \ifx#1\relax % Stop when reaching \relax
    \else
        \FudgeDie{#1} % Process current character
        \expandafter\FudgeLoop % Recursive call
    \fi
}

%% Skill levels %%%%%%%%%%%%%%%%%
\newcommand{\Untrained}{\textbf{Untrained (0)}\xspace}
\newcommand{\Novice}{\textbf{Novice (+1)}\xspace}
\newcommand{\Skilled}{\textbf{Skilled (+2)}\xspace}
\newcommand{\Expert}{\textbf{Expert (+3)}\xspace}

%% Define commands for difficulty levels %%%%%%%%%%%%%%%%%
\newcommand{\Trivial}{\textbf{Trivial (-4)}\xspace}
\newcommand{\Simple}{\textbf{Simple (-3)}\xspace}
\newcommand{\Easy}{\textbf{Easy (-2)}\xspace}
\newcommand{\Basic}{\textbf{Basic (-1)}\xspace}
\newcommand{\Challenging}{\textbf{Challenging (0)}\xspace}
\newcommand{\Difficult}{\textbf{Difficult (+1)}\xspace}
\newcommand{\Formidable}{\textbf{Formidable (+2)}\xspace}
\newcommand{\Arduous}{\textbf{Arduous (+3)}\xspace}
\newcommand{\Extreme}{\textbf{Extreme (+4)}\xspace}
\newcommand{\Impossible}{\textbf{Impossible (+5)}\xspace}

\lstset{%
  basicstyle=\ttfamily,
  language=[LaTeX]{TeX},
  breaklines=true,
}

\title{The Wyrd Engine}
\author{Thomas Mailund}

\begin{document}
\DndSetThemeColor[DmgSlateGray]

\frontmatter
\maketitle
\tableofcontents

\mainmatter%


\input{content/index.tex}

\printindex

\end{document}
